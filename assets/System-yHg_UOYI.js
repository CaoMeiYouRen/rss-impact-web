import{f as x,k as f,l as s,z as C,p as V,d as g,A as v,e as B}from"./index-D-ytJbHH.js";/* empty css               */import{d as D,s as T,r as q,b as F,o as r,c as M,U as e,M as t,L as d,R as _,Q as y}from"./vendor-CuSlqIw8.js";import"./utils-D0r9SEbO.js";import"./elementPlusIcons-DP5dCSo9.js";const G=D({__name:"System",setup(U){const n=T(),l=q({}),m=F(()=>l.value.type==="sqlite"),k=async()=>{try{await f.api.systemSqliteVacuum(),s.success("执行成功！"),n.value&&await n.value.initForm()}catch(a){s.error("执行失败！"),console.error(a)}},b=async()=>{try{await C.confirm("确定禁用所有不包含 Hook 和 自定义查询的订阅吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})==="confirm"&&(await f.api.systemDisableEmptyFeeds(),s.success("执行成功！"))}catch(a){s.error("执行失败！"),console.error(a)}};return(a,o)=>{const c=V,i=g,u=v,p=B,E=x;return r(),M("div",null,[e(E,{gutter:20},{default:t(()=>[e(p,{sm:24,md:12,lg:8},{default:t(()=>[e(c,{ref_key:"formDom",ref:n,modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=w=>l.value=w),method:"GET",url:"/system/getDatabaseInfo"},null,8,["modelValue"]),e(u,{class:"box-item",effect:"dark",content:"触发 sqlite 的 VACUUM 命令以释放未使用空间",placement:"bottom"},{default:t(()=>[m.value?(r(),d(i,{key:0,type:"primary",onClick:k},{default:t(()=>o[1]||(o[1]=[_(" 压缩数据库 ")])),_:1})):y("",!0)]),_:1}),e(u,{class:"box-item",effect:"dark",content:"禁用所有不包含 Hook 和 自定义查询的订阅",placement:"bottom"},{default:t(()=>[m.value?(r(),d(i,{key:0,type:"primary",onClick:b},{default:t(()=>o[2]||(o[2]=[_(" 禁用空订阅 ")])),_:1})):y("",!0)]),_:1})]),_:1}),e(p,{sm:24,md:12,lg:8},{default:t(()=>[e(c,{method:"GET",url:"/system/getOsInfo"})]),_:1})]),_:1})])}}});export{G as default};

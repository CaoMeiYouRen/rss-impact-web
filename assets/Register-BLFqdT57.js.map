{"version":3,"file":"Register-BLFqdT57.js","sources":["../../src/views/Register.vue"],"sourcesContent":["<template>\n    <div class=\"register-container\">\n        <div class=\"register-form\">\n            <div>\n                <div class=\"logo\" tabindex=\"-1\">\n                    <el-image\n                        :src=\"logo\"\n                        tabindex=\"-1\"\n                        lazy\n                    >\n                        <template #placeholder>\n                            <div class=\"image-slot\">\n                                Loading<span class=\"dot\">...</span>\n                            </div>\n                        </template>\n                        <template #error>\n                            <div class=\"image-slot\">\n                                <el-icon><icon-picture /></el-icon>\n                            </div>\n                        </template>\n                    </el-image>\n                </div>\n                <h1 class=\"logo-title\">\n                    RSS Impact\n                </h1>\n            </div>\n            <avue-form\n                ref=\"formRef\"\n                v-model=\"registerForm\"\n                :option=\"option\"\n\n                @submit=\"submit\"\n            >\n                <template #menu-form=\"{size}\">\n                    <el-row class=\"button-row\" justify=\"space-between\">\n                        <!-- <el-col :span=\"11\">\n                            <el-button\n                                type=\"danger\"\n                                class=\"clear-button\"\n                                :size=\"size\"\n                                @click=\"clearForm\"\n                            >\n                                <el-icon><Delete /></el-icon>\n                                <span>清空</span>\n                            </el-button>\n                        </el-col> -->\n                        <el-col :span=\"11\">\n                            <el-button\n                                type=\"primary\"\n                                class=\"login-button\"\n                                size=\"large\"\n                                @click=\"$router.push('/login')\"\n                            >\n                                <el-icon><CaretLeft /></el-icon>\n                                <span>返回登录</span>\n                            </el-button>\n                        </el-col>\n                        <el-col :span=\"11\">\n                            <el-button\n                                type=\"success\"\n                                native-type=\"submit\"\n                                class=\"register-button\"\n                                size=\"large\"\n                                :disabled=\"disablePasswordRegister\"\n                                @click=\"onRegister\"\n                            >\n                                <el-icon><Position /></el-icon>\n                                <span>注册</span>\n                            </el-button>\n                        </el-col>\n                    </el-row>\n                </template>\n            </avue-form>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, ref, shallowRef } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport { RegisterDto } from '@/api/api'\nimport { baseValidatePassword, isEmail, isValidUsername } from '@/utils/validate'\nimport { api } from '@/api'\nimport logo from '@/assets/images/logo.png'\nimport { AvueFormOption } from '@/interfaces/avue'\nimport { useAppStore } from '@/store/modules/app'\n\nconst router = useRouter()\nconst state = useAppStore()\n\nconst disablePasswordRegister = computed(() => state.authMeta.disablePasswordRegister)\n\nconst validateUsername = (_rule: any, value: string, callback: (error?: Error) => void) => {\n    if (isValidUsername(value)) {\n        return callback(new Error('请输入用户名'))\n    }\n    callback()\n}\n\nconst validatePassword = (_rule: any, value: string, callback: (error?: Error) => void) => {\n    const error = baseValidatePassword(value)\n    if (error) {\n        return callback(error)\n    }\n    callback()\n}\n\nconst validateEmail = (_rule: any, value: string, callback: (error?: Error) => void) => {\n    if (!isEmail(value)) {\n        return callback(new Error('邮箱格式有误'))\n    }\n    callback()\n}\n\nconst formRef = shallowRef<any>(null)\n\nconst registerForm = ref<RegisterDto>({\n    username: '',\n    password: '',\n    email: '',\n})\n\nconst option: AvueFormOption = {\n    submitBtn: false,\n    submitText: '注册',\n    emptyBtn: false,\n    column: {\n        username: {\n            span: 24,\n            label: '用户名',\n            prefixIcon: 'el-icon-user',\n            autocomplete: 'off',\n            rules: [\n                { required: true, message: '请输入用户名', trigger: 'blur' },\n                { validator: validateUsername, trigger: 'blur' },\n            ],\n        },\n        email: {\n            span: 24,\n            label: '邮箱',\n            prefixIcon: 'el-icon-message',\n            autocomplete: 'off',\n            rules: [\n                { required: true, message: '请输入邮箱', trigger: 'blur' },\n                { validator: validateEmail, trigger: 'blur' },\n            ],\n        },\n        password: {\n            type: 'password',\n            span: 24,\n            label: '密码',\n            prefixIcon: 'el-icon-lock',\n            autocomplete: 'off',\n            rules: [\n                { required: true, message: '请输入密码', trigger: 'blur' },\n                { validator: validatePassword, trigger: 'blur' },\n            ],\n        },\n    } as any,\n}\n\nconst onRegister = () => {\n    formRef.value?.submit()\n}\n\nconst submit = async (form: RegisterDto, done: () => void) => {\n    try {\n        await api.api.authRegister(form)\n        ElMessage.success('注册成功！即将跳转到登录页面')\n        setTimeout(async () => {\n            await router.push({\n                path: '/login',\n            })\n        }, 3000)\n    } catch (error) {\n        console.error(error)\n    } finally {\n        done()\n    }\n}\n\nconst clearForm = () => {\n    registerForm.value = {\n        username: '',\n        password: '',\n        email: '',\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.register-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100vh;\n    background: linear-gradient(135deg, #83a4d4, #b6fbff);\n\n    .register-form {\n        background: rgb(255 255 255 / 100%);\n        padding: 40px;\n        border-radius: 10px;\n        box-shadow: 0 10px 20px rgb(0 0 0 / 10%);\n        width: 400px;\n        text-align: center;\n\n        .logo {\n            margin: 0 auto 20px;\n            width: 150px;\n        }\n\n        .logo-title{\n            color:rgb(20 34 51);\n        }\n\n        .el-form-item {\n            margin-bottom: 20px;\n        }\n\n        .button-row {\n            margin-top: 20px;\n            margin-bottom: 20px;\n        }\n\n        .el-button {\n            width: 100%;\n            border-radius: 5px;\n            transition: background-color 0.3s ease;\n\n            // &:hover {\n            //     background-color: #66bb6a;\n            // }\n        }\n\n        .clear-button {\n            background-color: #f56c6c;\n            border-color: #f56c6c;\n\n            &:hover {\n                background-color: #f78989;\n                border-color: #f78989;\n            }\n        }\n    }\n}\n</style>\n"],"names":["router","useRouter","state","useAppStore","disablePasswordRegister","computed","validateUsername","_rule","value","callback","isValidUsername","validatePassword","error","baseValidatePassword","validateEmail","isEmail","formRef","shallowRef","registerForm","ref","option","onRegister","_a","submit","form","done","api","ElMessage","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_el_image","_unref","logo","_cache","_hoisted_4","_component_el_icon","_component_icon_picture","_component_avue_form","$event","_withCtx","size","_component_el_row","_component_el_col","_component_el_button","$router","_component_CaretLeft","_component_Position"],"mappings":"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"}
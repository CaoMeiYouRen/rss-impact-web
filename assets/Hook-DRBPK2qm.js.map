{"version":3,"file":"Hook-DRBPK2qm.js","sources":["../../src/views/data/Hook.vue"],"sourcesContent":["<template>\n    <CrudList\n        v-model=\"form\"\n        model=\"hook\"\n        :post-get=\"postGet\"\n        :pre-save=\"preSave\"\n        :pre-update=\"preUpdate\"\n    />\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref, watch } from 'vue'\nimport { omit } from 'lodash-es'\nimport { Hook } from '@/api/api'\nimport { objectValueToString, remove$key, stringValueToObject } from '@/utils/helper'\nconst form = ref<Hook>({} as any)\nconst postGet = (data: Hook) => {\n    if (['notification', 'webhook'].includes(data.type)) {\n        (data.config as any) = objectValueToString(data.config as any)\n    }\n    return data\n}\n\nconst pre = (data: Hook) => {\n    if ((data?.config as any)?._type ) {\n        delete (data.config as any)._type\n    }\n    if (['notification', 'webhook'].includes(data.type)) {\n        (data.config as any) = stringValueToObject(data.config as any)\n    }\n    data.config = omit(data.config as any, ['0', '1']) as any\n    data.config = remove$key(data.config as any) as any\n    if (!data.proxyConfigId) {\n        data.proxyConfigId = null as any\n    }\n    return data\n}\nconst preSave = pre\nconst preUpdate = pre\nwatch(() => form.value?.type, (type) => {\n    if (form.value?.config && type) {\n        form.value.config = {    // 将 type 同步到 config\n            ...form.value.config,\n            _type: type,\n        } as any\n    }\n})\n\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n"],"names":["form","ref","postGet","data","objectValueToString","pre","_a","stringValueToObject","omit","remove$key","preSave","preUpdate","watch","type"],"mappings":"0PAeM,MAAAA,EAAOC,EAAU,EAAS,EAC1BC,EAAWC,IACT,CAAC,eAAgB,SAAS,EAAE,SAASA,EAAK,IAAI,IAC7CA,EAAK,OAAiBC,EAAoBD,EAAK,MAAa,GAE1DA,GAGLE,EAAOF,GAAe,OACnB,OAAAG,EAAAH,GAAA,YAAAA,EAAM,SAAN,MAAAG,EAAsB,OACvB,OAAQH,EAAK,OAAe,MAE5B,CAAC,eAAgB,SAAS,EAAE,SAASA,EAAK,IAAI,IAC7CA,EAAK,OAAiBI,EAAoBJ,EAAK,MAAa,GAEjEA,EAAK,OAASK,EAAKL,EAAK,OAAe,CAAC,IAAK,GAAG,CAAC,EAC5CA,EAAA,OAASM,EAAWN,EAAK,MAAa,EACtCA,EAAK,gBACNA,EAAK,cAAgB,MAElBA,CACX,EACMO,EAAUL,EACVM,EAAYN,EAClB,OAAAO,EAAM,IAAA,OAAM,OAAAN,EAAAN,EAAK,QAAL,YAAAM,EAAY,MAAOO,GAAS,QAChCP,EAAAN,EAAK,QAAL,MAAAM,EAAY,QAAUO,IACtBb,EAAK,MAAM,OAAS,CAChB,GAAGA,EAAK,MAAM,OACd,MAAOa,CACX,EACJ,CACH"}